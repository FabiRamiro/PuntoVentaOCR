<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane fx:id="mainContainer" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.pos.puntoventaocr.controllers.PrincipalController">
    <top>
        <!-- Barra de men칰s -->
        <VBox>
            <children>
                <MenuBar fx:id="menuBar">
                    <menus>
                        <!-- Men칰 Ventas -->
                        <Menu fx:id="menuVentas" mnemonicParsing="false" text="Ventas">
                            <items>
                                <MenuItem fx:id="menuNuevaVenta" mnemonicParsing="false" onAction="#handleNuevaVenta" text="Nueva Venta" />
                                <MenuItem fx:id="menuHistorialVentas" mnemonicParsing="false" onAction="#handleHistorialVentas" text="Historial de Ventas" />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="menuAnularVenta" mnemonicParsing="false" onAction="#handleAnularVenta" text="Anular Venta" />
                            </items>
                        </Menu>

                        <!-- Men칰 Productos -->
                        <Menu fx:id="menuProductos" mnemonicParsing="false" text="Productos">
                            <items>
                                <MenuItem fx:id="menuGestionarProductos" mnemonicParsing="false" onAction="#handleGestionarProductos" text="Gestionar Productos" />
                                <MenuItem fx:id="menuCategorias" mnemonicParsing="false" onAction="#handleCategorias" text="Categor칤as" />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="menuInventario" mnemonicParsing="false" onAction="#handleInventario" text="Inventario" />
                            </items>
                        </Menu>

                        <!-- Men칰 Usuarios (solo administradores) -->
                        <Menu fx:id="menuUsuarios" mnemonicParsing="false" text="Usuarios">
                            <items>
                                <MenuItem fx:id="menuGestionarUsuarios" mnemonicParsing="false" onAction="#handleGestionarUsuarios" text="Gestionar Usuarios" />
                                <MenuItem fx:id="menuRoles" mnemonicParsing="false" onAction="#handleRoles" text="Roles y Permisos" />
                            </items>
                        </Menu>

                        <!-- Men칰 OCR -->
                        <Menu fx:id="menuOCR" mnemonicParsing="false" text="OCR">
                            <items>
                                <MenuItem fx:id="menuValidarTransferencia" mnemonicParsing="false" onAction="#handleValidarTransferencia" text="Validar Transferencia" />
                                <MenuItem fx:id="menuHistorialOCR" mnemonicParsing="false" onAction="#handleHistorialOCR" text="Historial OCR" />
                            </items>
                        </Menu>

                        <!-- Men칰 Reportes -->
                        <Menu fx:id="menuReportes" mnemonicParsing="false" text="Reportes">
                            <items>
                                <MenuItem fx:id="menuReporteVentas" mnemonicParsing="false" onAction="#handleReporteVentas" text="Reporte de Ventas" />
                                <MenuItem fx:id="menuReporteProductos" mnemonicParsing="false" onAction="#handleReporteProductos" text="Productos M치s Vendidos" />
                                <MenuItem fx:id="menuReporteStock" mnemonicParsing="false" onAction="#handleReporteStock" text="Reporte de Stock" />
                            </items>
                        </Menu>

                        <!-- Men칰 Sistema -->
                        <Menu fx:id="menuSistema" mnemonicParsing="false" text="Sistema">
                            <items>
                                <MenuItem fx:id="menuCambiarPassword" mnemonicParsing="false" onAction="#handleCambiarPassword" text="Cambiar Contrase침a" />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="menuConfiguracion" mnemonicParsing="false" onAction="#handleConfiguracion" text="Configuraci칩n" />
                                <MenuItem fx:id="menuAcercaDe" mnemonicParsing="false" onAction="#handleAcercaDe" text="Acerca de..." />
                                <SeparatorMenuItem mnemonicParsing="false" />
                                <MenuItem fx:id="menuCerrarSesion" mnemonicParsing="false" onAction="#handleCerrarSesion" text="Cerrar Sesi칩n" />
                            </items>
                        </Menu>
                    </menus>
                </MenuBar>

                <!-- Barra de estado superior -->
                <HBox alignment="CENTER_LEFT" styleClass="toolbar-pane">
                    <children>
                        <Label text="Usuario: " />
                        <Label fx:id="lblUsuario" styleClass="label-info" text="Admin" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Label fx:id="lblFechaHora" text="01/01/2024 12:00:00" />
                        <Separator orientation="VERTICAL" />
                        <Label fx:id="lblEstadoSesion" styleClass="label-success" text="Sesi칩n activa: 0 min" />
                        <ProgressBar fx:id="progressBarSesion" prefWidth="100.0" progress="0.0" />
                    </children>
                    <padding>
                        <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
                    </padding>
                </HBox>
            </children>
        </VBox>
    </top>

    <!-- 츼rea de contenido principal -->
    <center>
        <ScrollPane fitToHeight="true" fitToWidth="true">
            <content>
                <VBox alignment="CENTER" styleClass="content-pane">
                    <children>
                        <!-- Dashboard por defecto -->
                        <VBox alignment="CENTER" spacing="30.0">
                            <children>
                                <Label styleClass="label-title" text="춰Bienvenido al Sistema POS!">
                                    <font>
                                        <Font name="System Bold" size="28.0" />
                                    </font>
                                </Label>

                                <Label styleClass="label-subtitle" text="Seleccione una opci칩n del men칰 para comenzar">
                                    <font>
                                        <Font size="16.0" />
                                    </font>
                                </Label>

                                <!-- Cards de acceso r치pido -->
                                <HBox alignment="CENTER" spacing="20.0">
                                    <children>
                                        <!-- Card Nueva Venta -->
                                        <VBox alignment="CENTER" onMouseClicked="#handleNuevaVenta" spacing="10.0" styleClass="card">
                                            <children>
                                                <Label styleClass="label-title" text="游눯">
                                                    <font>
                                                        <Font size="36.0" />
                                                    </font>
                                                </Label>
                                                <Label styleClass="label-section" text="Nueva Venta" />
                                                <Label text="Registrar una nueva venta" />
                                            </children>
                                            <padding>
                                                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                            </padding>
                                        </VBox>

                                        <!-- Card Productos -->
                                        <VBox alignment="CENTER" onMouseClicked="#handleGestionarProductos" spacing="10.0" styleClass="card">
                                            <children>
                                                <Label styleClass="label-title" text="游닍">
                                                    <font>
                                                        <Font size="36.0" />
                                                    </font>
                                                </Label>
                                                <Label styleClass="label-section" text="Productos" />
                                                <Label text="Gestionar cat치logo" />
                                            </children>
                                            <padding>
                                                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                            </padding>
                                        </VBox>

                                        <!-- Card OCR -->
                                        <VBox alignment="CENTER" onMouseClicked="#handleValidarTransferencia" spacing="10.0" styleClass="card">
                                            <children>
                                                <Label styleClass="label-title" text="游댌">
                                                    <font>
                                                        <Font size="36.0" />
                                                    </font>
                                                </Label>
                                                <Label styleClass="label-section" text="Validar OCR" />
                                                <Label text="Validar transferencias" />
                                            </children>
                                            <padding>
                                                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                            </padding>
                                        </VBox>

                                        <!-- Card Reportes -->
                                        <VBox alignment="CENTER" onMouseClicked="#handleReporteVentas" spacing="10.0" styleClass="card">
                                            <children>
                                                <Label styleClass="label-title" text="游늵">
                                                    <font>
                                                        <Font size="36.0" />
                                                    </font>
                                                </Label>
                                                <Label styleClass="label-section" text="Reportes" />
                                                <Label text="Ver estad칤sticas" />
                                            </children>
                                            <padding>
                                                <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                                            </padding>
                                        </VBox>
                                    </children>
                                </HBox>
                            </children>
                        </VBox>
                    </children>
                </VBox>
            </content>
        </ScrollPane>
    </center>

    <!-- Barra de estado inferior -->
    <bottom>
        <HBox alignment="CENTER_LEFT" styleClass="footer">
            <children>
                <Label styleClass="label-info" text="Sistema POS con OCR v1.0.0" />
                <Region HBox.hgrow="ALWAYS" />
                <Label text="춸 2024 - Todos los derechos reservados" />
            </children>
            <padding>
                <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
            </padding>
        </HBox>
    </bottom>
</BorderPane>